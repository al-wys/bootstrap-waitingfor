!function(e,d){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return d(e)}):e.waitingDialog=e.waitingDialog||d(e.jQuery)}(this,function(e){"use strict";function d(d){return d&&d.remove(),e('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header" style="display: none;"></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div></div></div></div></div>')}var a,o,n=e.Deferred();return{show:function(s,i){"undefined"==typeof i&&(i={}),"undefined"==typeof s&&(s="Loading"),o=e.extend({headerText:"",headerSize:3,headerClass:"",dialogSize:"m",progressType:"",contentElement:"p",contentClass:"content",onHide:null,onShow:n.resolve},i);var t,r;a=d(a),a.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+o.dialogSize),a.find(".progress-bar").attr("class","progress-bar progress-bar-striped progress-bar-animated"),o.progressType&&a.find(".progress-bar").addClass("progress-bar-"+o.progressType),t=e("<h"+o.headerSize+" />"),t.css({margin:0}),o.headerClass&&t.addClass(o.headerClass),r=e("<"+o.contentElement+" />"),o.contentClass&&r.addClass(o.contentClass),o.headerText===!1?(r.html(s),a.find(".modal-body").prepend(r)):o.headerText?(t.html(o.headerText),a.find(".modal-header").html(t).show(),r.html(s),a.find(".modal-body").prepend(r)):(t.html(s),a.find(".modal-header").html(t).show()),"function"==typeof o.onHide&&a.off("hidden.bs.modal").on("hidden.bs.modal",function(){o.onHide.call(a)}),"function"==typeof o.onShow&&a.off("shown.bs.modal").on("shown.bs.modal",function(){o.onShow.call(a)}),a.modal()},hide:function(){"undefined"!=typeof a&&n.then(function(){a.modal("hide"),n=e.Deferred()})},message:function(e){return"undefined"!=typeof a?"undefined"!=typeof e?a.find(".modal-header>h"+o.headerSize).html(e):a.find(".modal-header>h"+o.headerSize).html():void 0}}});